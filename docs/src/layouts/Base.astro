---
interface Props {
  title: string;
  description?: string;
}

const { title, description = 'skills that pick winners, not catalogs' } = Astro.props;
const currentPath = Astro.url.pathname;
---

<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width" />
  <meta name="description" content={description} />
  <link rel="icon" type="image/svg+xml" href="/claude-1337/favicon.svg" />
  <title>{title} | claude-1337</title>
  <script is:inline>
    (function() {
      const theme = localStorage.getItem('theme') || '1337';
      document.documentElement.setAttribute('data-theme', theme);
    })();
  </script>
  <style is:global>
    /* 1337 theme (default) */
    :root, [data-theme="1337"] {
      --bg: #1a1a1a;
      --bg-alt: #222;
      --fg: #c8c8c8;
      --fg-dim: #666;
      --accent: #7aa2f7;
      --green: #9ece6a;
      --yellow: #e0af68;
      --red: #f7768e;
    }

    /* vim theme */
    [data-theme="vim"] {
      --bg: #1c1c1c;
      --bg-alt: #303030;
      --fg: #d0d0d0;
      --fg-dim: #4e4e4e;
      --accent: #5fafd7;
      --green: #87d787;
      --yellow: #d7af5f;
      --red: #d75f5f;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }

    html { font-size: 15px; }

    body {
      font-family: ui-monospace, 'SF Mono', 'Cascadia Code', 'Source Code Pro', Menlo, Consolas, monospace;
      background: var(--bg);
      color: var(--fg);
      line-height: 1.6;
      min-height: 100vh;
    }

    a {
      color: var(--accent);
      text-decoration: none;
    }

    a:hover {
      text-decoration: underline;
    }

    code {
      background: var(--bg-alt);
      padding: 0.15em 0.3em;
      font-size: 0.95em;
    }

    pre {
      background: var(--bg-alt);
      padding: 1rem;
      overflow-x: auto;
      margin: 1rem 0;
      border-left: 2px solid var(--fg-dim);
    }

    pre code {
      background: none;
      padding: 0;
    }

    h1, h2, h3 {
      font-weight: normal;
    }

    h1 {
      font-size: 1rem;
      color: var(--fg-dim);
    }

    h1 strong {
      color: var(--fg);
      font-weight: bold;
    }

    h2 {
      font-size: 1rem;
      color: var(--yellow);
      margin: 2.5rem 0 1rem;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    h2::before {
      content: '## ';
      color: var(--fg-dim);
    }

    h3 {
      font-size: 1rem;
      font-weight: bold;
      color: var(--green);
      margin: 1.5rem 0 0.5rem;
    }

    h3::before {
      content: '### ';
      color: var(--fg-dim);
    }

    p { margin: 0.75rem 0; }

    table {
      width: 100%;
      border-collapse: collapse;
      margin: 1rem 0;
      font-size: 0.9rem;
    }

    th, td {
      text-align: left;
      padding: 0.5rem;
      border-bottom: 1px solid var(--bg-alt);
    }

    th {
      color: var(--fg-dim);
      font-weight: normal;
      text-transform: uppercase;
      font-size: 0.8rem;
      letter-spacing: 0.05em;
    }

    ul, ol {
      margin: 0.75rem 0;
      padding-left: 2rem;
    }

    li { margin: 0.25rem 0; }

    .container {
      max-width: 80ch;
      margin: 0 auto;
      padding: 2rem;
    }

    /* Navigation */
    nav {
      border-bottom: 1px solid var(--fg-dim);
      padding-bottom: 1rem;
      margin-bottom: 2rem;
    }

    nav ul {
      list-style: none;
      padding: 0;
      display: flex;
      gap: 2rem;
      flex-wrap: wrap;
    }

    nav a {
      color: var(--fg-dim);
    }

    nav a:hover, nav a.active {
      color: var(--accent);
    }

    nav a.active::before {
      content: '> ';
    }

    /* Subnav */
    .has-sub {
      position: relative;
    }

    .subnav {
      display: none;
      position: absolute;
      top: 100%;
      left: 0;
      background: var(--bg);
      border: 1px solid var(--fg-dim);
      padding: 0.5rem 0;
      min-width: 12rem;
      z-index: 10;
    }

    .has-sub:hover .subnav {
      display: block;
    }

    .subnav li {
      margin: 0;
    }

    .subnav a {
      display: block;
      padding: 0.25rem 1rem;
    }

    .subnav a:hover {
      background: var(--bg-alt);
      text-decoration: none;
    }

    /* Footer */
    footer {
      margin-top: 4rem;
      padding-top: 1rem;
      border-top: 1px solid var(--fg-dim);
      font-size: 0.85rem;
      color: var(--fg-dim);
    }

    /* Stats */
    .stats {
      display: flex;
      gap: 3rem;
      margin: 1.5rem 0;
      padding: 1rem;
      background: var(--bg-alt);
    }

    .stat-value {
      font-size: 1.5rem;
      font-weight: bold;
    }

    .stat-value.bad { color: var(--red); }
    .stat-value.good { color: var(--green); }

    .stat-label {
      font-size: 0.8rem;
      color: var(--fg-dim);
    }

    /* Tags */
    .new::after {
      content: ' [new]';
      color: var(--green);
    }

    .wip::after {
      content: ' [wip]';
      color: var(--yellow);
    }

    /* File tree style */
    .tree {
      list-style: none;
      padding: 0;
      margin: 1rem 0;
    }

    .tree li {
      padding: 0.25rem 0;
    }

    .tree .dir::before {
      content: 'd ';
      color: var(--fg-dim);
    }

    .tree .file::before {
      content: '- ';
      color: var(--fg-dim);
    }

    .tree .indent {
      padding-left: 2ch;
    }

    /* Opener */
    .opener {
      font-size: 1.1rem;
      color: var(--fg);
      margin-bottom: 1.5rem;
    }

    /* Plugin list */
    .plugin-list {
      list-style: none;
      padding: 0;
    }

    .plugin-list li {
      padding: 0.5rem 0;
      border-bottom: 1px solid var(--bg-alt);
    }

    .plugin-list a {
      font-weight: bold;
    }

    /* Theme toggle */
    .theme-toggle {
      background: none;
      border: 1px solid var(--fg-dim);
      color: var(--fg-dim);
      padding: 0.25rem 0.5rem;
      font-family: inherit;
      font-size: 0.8rem;
      cursor: pointer;
      margin-left: 1rem;
    }

    .theme-toggle:hover {
      color: var(--accent);
      border-color: var(--accent);
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1><strong>claude-1337</strong> â€” 1337 plugins for claude code</h1>
    </header>

    <nav>
      <ul>
        <li><a href="/claude-1337/" class={currentPath === '/claude-1337/' ? 'active' : ''}>start</a></li>
        <li><a href="/claude-1337/concepts/" class={currentPath.includes('/concepts') ? 'active' : ''}>concepts</a></li>
        <li><a href="/claude-1337/how-to/" class={currentPath.includes('/how-to') ? 'active' : ''}>how-to</a></li>
        <li class="has-sub">
          <a href="/claude-1337/reference/" class={currentPath.includes('/reference') ? 'active' : ''}>reference</a>
          <ul class="subnav">
            <li><a href="/claude-1337/reference/terminal-1337/">terminal-1337</a></li>
            <li><a href="/claude-1337/reference/rust-1337/">rust-1337</a></li>
            <li><a href="/claude-1337/reference/1337-skill-creator/">1337-skill-creator</a></li>
            <li><a href="/claude-1337/reference/sensei-1337/">sensei-1337</a></li>
          </ul>
        </li>
        <li><a href="/claude-1337/explanation/" class={currentPath.includes('/explanation') ? 'active' : ''}>explanation</a></li>
      </ul>
    </nav>

    <main>
      <slot />
    </main>

    <footer>
      <p>
        github: <a href="https://github.com/yzavyas/claude-1337">yzavyas/claude-1337</a>
        <button class="theme-toggle" id="theme-toggle">:colorscheme</button>
      </p>
    </footer>
  </div>

  <script is:inline>
    const toggle = document.getElementById('theme-toggle');
    toggle.addEventListener('click', () => {
      const current = document.documentElement.getAttribute('data-theme') || '1337';
      const next = current === '1337' ? 'vim' : '1337';
      document.documentElement.setAttribute('data-theme', next);
      localStorage.setItem('theme', next);
    });
  </script>
</body>
</html>
