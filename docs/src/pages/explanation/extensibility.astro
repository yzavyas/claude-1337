---
import Base from '../../layouts/Base.astro';
---

<Base title="extensibility" description="understanding how to extend claude code">
  <p><a href="/claude-1337/explanation/">&larr; explanation</a></p>

  <h1>extensibility</h1>

  <p class="dimmed-intro">understanding how to extend claude code with custom functionality</p>

  <h2>what does extensible mean?</h2>

  <p>extensibility means you can add new capabilities to claude code without modifying its core. think of it like a smartphone:</p>

  <ul>
    <li><strong>base phone</strong> — claude code CLI (camera, phone, messaging)</li>
    <li><strong>app store</strong> — plugin marketplaces (install new apps)</li>
    <li><strong>custom apps</strong> — your own plugins (build what you need)</li>
  </ul>

  <p>claude code provides extension points where you can plug in custom behavior.</p>

  <h2>extension mechanisms</h2>

  <table>
    <thead>
      <tr>
        <th>mechanism</th>
        <th>what it extends</th>
        <th>when to use</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><strong>skills</strong></td>
        <td>claude's knowledge</td>
        <td>teach claude domain expertise (rust patterns, cli tools)</td>
      </tr>
      <tr>
        <td><strong>hooks</strong></td>
        <td>claude's behavior</td>
        <td>modify how claude responds (forced eval, output formatting)</td>
      </tr>
      <tr>
        <td><strong>agents</strong></td>
        <td>autonomous capabilities</td>
        <td>specialized task execution (code review, research)</td>
      </tr>
      <tr>
        <td><strong>commands</strong></td>
        <td>CLI workflows</td>
        <td>custom slash commands (/deploy, /test)</td>
      </tr>
      <tr>
        <td><strong>MCP servers</strong></td>
        <td>external integrations</td>
        <td>connect to APIs, databases, services</td>
      </tr>
    </tbody>
  </table>

  <h2>how plugins work</h2>

  <p>a plugin is a package that bundles multiple extensions:</p>

  <pre><code>my-plugin/
├── skills/           # knowledge to inject
│   └── SKILL.md
├── hooks/            # behavior modifiers
│   └── SessionStart.js
├── agents/           # autonomous workers
│   └── my-agent/
├── commands/         # slash commands
│   └── deploy.md
└── mcp/              # external integrations
    └── server.js</code></pre>

  <p>when you install a plugin, claude code registers all these extensions and makes them available.</p>

  <h2>extending with skills</h2>

  <p>skills inject domain knowledge. you write SKILL.md files containing:</p>

  <ul>
    <li><strong>description</strong> — when claude should use this (critical for activation)</li>
    <li><strong>knowledge</strong> — decision frameworks, patterns, tools</li>
    <li><strong>references</strong> — additional docs (loaded on-demand)</li>
  </ul>

  <p>example: terminal-1337 teaches claude about modern CLI tools (rg, fd, bat). when you ask "how do i search files", claude loads that skill and recommends ripgrep.</p>

  <h3>skill activation pattern</h3>

  <pre><code>User asks question
  ↓
Claude checks <available_skills>
  ↓
Matches skill description → loads SKILL.md
  ↓
Uses knowledge to respond</code></pre>

  <p>see <a href="/claude-1337/reference/research/">research</a> on skill activation rates and how to optimize descriptions.</p>

  <h2>extending with hooks</h2>

  <p>hooks modify claude's behavior at specific lifecycle points:</p>

  <table>
    <thead>
      <tr>
        <th>hook</th>
        <th>when it runs</th>
        <th>what it can do</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>SessionStart</td>
        <td>when claude starts up</td>
        <td>inject instructions, set mode, configure behavior</td>
      </tr>
      <tr>
        <td>UserPromptSubmit</td>
        <td>before claude sees your message</td>
        <td>modify prompt, add context, enforce patterns</td>
      </tr>
      <tr>
        <td>AssistantResponse</td>
        <td>after claude responds</td>
        <td>post-process output, log, format</td>
      </tr>
    </tbody>
  </table>

  <p>example: core-1337's SessionStart hook injects the forced evaluation pattern that increases skill activation from 20% to 84%.</p>

  <h2>extending with custom agents</h2>

  <p>agents are autonomous workers built with the claude agent sdk. they:</p>

  <ul>
    <li>receive a goal (task description)</li>
    <li>have access to specific tools</li>
    <li>execute without asking for confirmation</li>
    <li>return structured results</li>
  </ul>

  <p>example: sensei-1337's feynman agent explains concepts using the feynman technique autonomously.</p>

  <h3>agent anatomy</h3>

  <pre><code>// agent definition
{'{'}
  name: "code-reviewer",
  description: "reviews code for issues",
  tools: [Read, Grep, Bash],
  systemPrompt: `
    you are a code reviewer.
    check for: security, performance, style.
    output: markdown report.
  `
{'}'}</code></pre>

  <p>when invoked via Task tool, the agent spawns, does its work, and returns findings.</p>

  <h2>extending with commands</h2>

  <p>commands are custom slash commands that expand to prompts:</p>

  <pre><code>// .claude/commands/deploy.md
---
name: deploy
description: deploy to production
---
run the deployment script, then verify health checks.
if anything fails, rollback.</code></pre>

  <p>when you type <code>/deploy</code>, claude sees the expanded prompt and executes it.</p>

  <h2>extending with MCP servers</h2>

  <p>MCP (model context protocol) servers connect claude to external systems:</p>

  <ul>
    <li><strong>databases</strong> — query postgres, mongodb, redis</li>
    <li><strong>APIs</strong> — call rest endpoints, graphql, grpc</li>
    <li><strong>services</strong> — interact with github, slack, jira</li>
    <li><strong>filesystems</strong> — access remote files, s3 buckets</li>
  </ul>

  <p>MCP servers expose tools that claude can call. example:</p>

  <pre><code>// github MCP server provides:
- create_issue(title, body)
- list_prs(repo)
- merge_pr(pr_number)</code></pre>

  <p>claude can then "create a github issue" by calling the tool provided by the MCP server.</p>

  <h2>combining extensions</h2>

  <p>powerful plugins combine multiple extension types:</p>

  <pre><code>terminal-1337:
├── skill: teaches modern CLI tools
├── hook: warns about deprecated commands
└── (future) agent: auto-optimizes shell scripts

core-1337:
└── hook: forces skill evaluation before responding

sensei-1337:
├── skill: teaches feynman + diataxis
└── agent: explains concepts using feynman</code></pre>

  <h2>extension discovery</h2>

  <p>claude code discovers extensions through:</p>

  <ol>
    <li><strong>plugin.json</strong> — declares what extensions the plugin contains</li>
    <li><strong>marketplace.json</strong> — lists available plugins</li>
    <li><strong>.claude/</strong> — user's local custom extensions</li>
  </ol>

  <p>when you install a plugin, its extensions are registered and become available to claude.</p>

  <h2>building your own extensions</h2>

  <h3>quick start</h3>

  <ul>
    <li><strong>skill</strong> — create SKILL.md with description + knowledge. see <a href="/claude-1337/reference/1337-skill-creator/">1337-skill-creator</a></li>
    <li><strong>hook</strong> — create javascript file exporting handler function</li>
    <li><strong>agent</strong> — use claude agent sdk to define agent + tools</li>
    <li><strong>command</strong> — create markdown file in .claude/commands/</li>
    <li><strong>MCP server</strong> — implement MCP protocol to expose tools</li>
  </ul>

  <h3>testing extensions</h3>

  <p>local development workflow:</p>

  <pre><code>1. create extension in .claude/
2. restart claude code (or reload)
3. test activation/behavior
4. iterate until working
5. package as plugin
6. publish to marketplace</code></pre>

  <h2>extension best practices</h2>

  <ul>
    <li><strong>single responsibility</strong> — one plugin, one purpose</li>
    <li><strong>clear descriptions</strong> — skills must have good "use when:" clauses</li>
    <li><strong>fail gracefully</strong> — hooks shouldn't break claude if they error</li>
    <li><strong>minimal dependencies</strong> — keep plugins lightweight</li>
    <li><strong>test activation</strong> — use the eval framework to validate skills trigger</li>
  </ul>

  <h2>limitations and constraints</h2>

  <p>what you can't extend (currently):</p>

  <ul>
    <li><strong>core tool implementations</strong> — can't modify Read, Edit, Bash tools</li>
    <li><strong>model selection</strong> — can't force claude to use specific models globally</li>
    <li><strong>token limits</strong> — can't increase context window</li>
    <li><strong>skill budget</strong> — can't exceed ~20-22k char in available_skills</li>
  </ul>

  <p>these are platform constraints, not extensibility limitations.</p>

  <h2>next steps</h2>

  <p>to build extensions:</p>

  <ol>
    <li>read <a href="/claude-1337/concepts/">concepts</a> to understand the architecture</li>
    <li>study <a href="/claude-1337/reference/1337-skill-creator/">1337-skill-creator</a> for skill authoring</li>
    <li>browse <a href="/claude-1337/reference/catalog/">plugin catalog</a> for examples</li>
    <li>use the <a href="/claude-1337/reference/research/">eval framework</a> to test</li>
  </ol>
</Base>
